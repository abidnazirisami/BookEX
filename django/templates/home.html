{% extends 'base.html' %}
{% load static %}
{% block title %}
<link rel="icon" href="{% static 'bookex-2.ico' %}" type="image/x-icon"> 
<link rel="firstpage" href="{% static 'BookEX.png' %}">
<link rel="review" href="{% static 'review_recommodation.png' %}">
<title>BookEX - Home</title>
{% endblock %}

{% block content %}
<meta name="viewport" content="width=device-width, initial-scale=1">
{% if user.is_authenticated %}
<div id="mySidenav" class="sidenav">
<a href="{% url 'home' %}" class="w3-bar-item w3-center zoom w3-roboto"><p class="w3-xxlarge"><b style="text-decoration: none; color: white">Book</b><b style="text-decoration: none; color: orange">EX</b></p></a>
<font color = "white" class="w3-wide w3-margin-left w3-margin-bottom"> Notifications: </font>
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
	{% for request,user,profile,cnt in request_list %}
	<div class="w3-container">
	  <form method="POST" class="post-form">
	  {% csrf_token %}	

		<div class="w3-card w3-margin-top w3-teal w3-padding-small w3-container" style="position: relative;">
		<span class="badge red w3-right">{{request.count}}</span>
		
		<p class="small"><a href="{% url 'viewprofile' username=user.user_name %}">{{profile.first_name}} {{profile.last_name}}</a>requested on {{request.request_date}} </p>
		<input type="hidden" name="username" value="{{profile.username}}">
		<input type="hidden" name="isbn" value="{{request.isbn}}">
		 <a href="{% url 'viewbookprofile' req_isbn=request.isbn %}"><h4>{{request.book_name}}</h4> </a> 
		<i>{{request.author_name}}, 
		{{request.edition}}
		{% if request.edition is 1 %}
		st edition
		{% elif request.edition is 2 %}
		nd edition
		{% else %}
		th edition
		{% endif %}
		</i>
		<span class="badge green w3-right">{{cnt}}</span>
		<div class="w3-right w3-margin-top" style="padding-bottom: 5px;">
			<button class="btn btn-info btn-xs" type="submit">Confirm</button>
		</div>
		</div>
	  </form>
	</div>
	{% endfor %}
	
</div>
<nav>
<span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;
{% if notification_count > 0 %}
<span class="badge red">{{notification_count}}</span>
{% endif %}

</span>
</nav>
<div class="w3-row ">
  <div class="w3-col m3 w3-large w3-margin-top" style="padding-right: 10px; padding-left: 10px">
	<div class="w3-card" style="width:100%">
		{% load static %}
		<a href="{% url 'list_of_books' %}">
		<img src="{% static 'test_img.jpeg' %}" alt="Books" style="width:100%; height: 100%">
		
		 <div class="w3-container">
      		<h4><b>Available Books</b></h4>
    	 </div>
    	 </a>
	</div>
  </div>
  <div class="w3-col m3 w3-large w3-margin-top" style="padding-right: 10px; padding-left: 10px">
  <div class="w3-card" style="width:100%">
		{% load static %}
		<a href="{% url 'searchbook' %}">
		<img src="{% static 'donate_book.jpg' %}" alt="Donate" style="width:100%; height: 100%">
		 <div class="w3-container">
      		<h4><b>Donate now!</b></h4>
    	 </div>
    	 </a>
	</div>
  </div>
<div class="w3-col m3 w3-large w3-margin-top" style="padding-right: 10px; padding-left: 10px">
  <div class="w3-card" style="width:100%">
		{% load static %}
		<a href="{% url 'addbook' %}">
		<img src="{% static 'img.jpg' %}" alt="Find Books" style="width:100%; height: 100%">
		
		 <div class="w3-container">
      		<h4><b>Find with ISBN</b></h4>
    	 </div>
    	 </a>
	</div>
  </div>
  <div class="w3-col m3 w3-large w3-margin-top" style="padding-right: 10px; padding-left: 10px">
    <div class="w3-card" style="width:100%">
		{% load static %}
		<a href="{% url 'requestbook' %}">
		<img src="{% static 'request_book.jpg' %}" alt="Request Books" style="width:100%; height: 100%">
		
		 <div class="w3-container">
      		<h4><b>Request Books</b></h4>
    	 </div>
    	 </a>
	</div>
  </div>
</div>




<script>

function openNav() {
	document.getElementById("mySidenav").style.width = "20%";
    document.getElementById("main").style.marginLeft = "20%";
    document.getElementById("about").style.marginLeft = "27%";
}

function closeNav() {
	document.getElementById("mySidenav").style.width = "0";
    document.getElementById("main").style.marginLeft= "0";
    document.getElementById("about").style.marginLeft= "0";
}
</script>
{% else %}
{% load static %}
<div>
	<div class="w3-display-container w3-content" style="margin-top:120px;margin-bottom: 50px;padding-left: 60px;padding-right: 60px; width:100%; height: 100%">
		 <!-- Slideshow container -->
	  <img class="mySlides" src="{% static 'BookEX.png' %}" style="width:100%; height: 100%">
	  <img class="mySlides" src="{% static 'review_recommodation.png' %}" style="width:100%; height: 100%">
	  <button class="w3-button w3-black w3-display-left" onclick="plusDivs(-1)">&#10094;</button>
	  <button class="w3-button w3-black w3-display-right" onclick="plusDivs(1)">&#10095;</button>
    </div>
</div>


<script>

var slideIndex = 1;
showDivs(slideIndex);
setInterval(function(){ plusDivs(1); }, 3000);
function plusDivs(n) {
  showDivs(slideIndex += n);
}
function showDivs(n) {
  var i;
  var x = document.getElementsByClassName("mySlides");
  if (n > x.length) {slideIndex = 1}    
  if (n < 1) {slideIndex = x.length}
  for (i = 0; i < x.length; i++) {
     x[i].style.display = "none";  
  }
  x[slideIndex-1].style.display = "block";
   // Change image every 3 seconds
}
</script>
  <!--a href="{% url 'signup' %}"><img src="{% static 'JoinUs.png' %}" alt="Join us!" class="zoom" style="width:30%;padding-top: 230px;"></a>
</div-->
{% endif %}
{% endblock %}
